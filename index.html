<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FRER 기반 TSN 이중화 - KSAE 발표</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.6.0/dist/reset.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.6.0/dist/reveal.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.6.0/dist/theme/black.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.6.0/plugin/highlight/monokai.css">

    <style>
        :root {
            --r-background-color: #0a0e27;
            --r-main-font: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
            --r-heading-font: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
            --r-main-color: #e0e0e0;
            --r-heading-color: #00d9ff;
            --r-link-color: #00d9ff;
            --r-selection-background-color: #00d9ff;
        }

        .reveal h1, .reveal h2, .reveal h3 {
            text-transform: none;
            font-weight: 700;
        }

        .reveal h1 {
            font-size: 2.5em;
            color: #00d9ff;
            text-shadow: 0 0 20px rgba(0, 217, 255, 0.5);
        }

        .reveal h2 {
            font-size: 1.8em;
            margin-bottom: 0.5em;
        }

        .reveal .author-info {
            font-size: 0.8em;
            margin-top: 2em;
            color: #aaa;
        }

        .reveal .highlight-box {
            background: rgba(0, 217, 255, 0.1);
            border-left: 4px solid #00d9ff;
            padding: 20px;
            margin: 20px 0;
        }

        .reveal .success {
            color: #00ff88;
        }

        .reveal .warning {
            color: #ffaa00;
        }

        .reveal .error {
            color: #ff4444;
        }

        .reveal table {
            font-size: 0.7em;
            margin: 20px auto;
        }

        .reveal table th {
            background: rgba(0, 217, 255, 0.2);
            font-weight: 700;
        }

        .reveal table td, .reveal table th {
            border: 1px solid #444;
            padding: 10px;
        }

        .reveal pre code {
            max-height: 500px;
        }

        .reveal .diagram {
            background: #1a1e3a;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .reveal .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .reveal ul, .reveal ol {
            font-size: 0.9em;
        }

        .reveal .footer {
            position: absolute;
            bottom: 10px;
            left: 10px;
            font-size: 0.5em;
            color: #666;
        }

        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap');
    </style>
</head>

<body>
    <div class="reveal">
        <div class="slides">

            <!-- Slide 1: Title -->
            <section data-background-gradient="linear-gradient(to bottom, #0a0e27, #1a2a4a)">
                <h1>자동차 이더넷의 신뢰성 확보를 위한<br>FRER 기반 TSN 이중화 기법</h1>
                <h3 style="margin-top: 1em;">Fail-Operational TSN 관점</h3>
                <div class="author-info">
                    <p><strong>김현우 · 박부식</strong></p>
                    <p>한국전자기술연구원 (KETI)<br>모빌리티플랫폼연구센터</p>
                    <p style="margin-top: 1.5em; font-size: 0.9em;">KSAE 모빌리티 플랫폼 발표</p>
                    <p style="font-size: 0.8em;">2025년 11월</p>
                </div>
            </section>

            <!-- Slide 2: 발표 개요 -->
            <section>
                <h2>발표 개요</h2>
                <div class="highlight-box">
                    <h3 style="font-size: 1.2em; margin-bottom: 0.5em;">연구 목적</h3>
                    <p>자율주행 Level 4-5 차량을 위한 <strong class="success">Fail-Operational</strong> 네트워크 구현</p>
                </div>
                <ul>
                    <li>IEEE 802.1CB FRER (Frame Replication and Elimination) 기술 소개</li>
                    <li>Kontron D10 (LAN9668) 기반 4-스위치 토폴로지 구현</li>
                    <li>Wireshark 패킷 캡처를 통한 실제 동작 검증</li>
                    <li>성능 평가: 제로 패킷 손실, 0ms 복구 시간</li>
                    <li>SAE J3016, ISO 26262, SOTIF 표준 요구사항 충족</li>
                </ul>
            </section>

            <!-- Slide 3: SAE J3016 자율주행 레벨 -->
            <section data-background-gradient="linear-gradient(135deg, #1a1e3a, #2a3a5a)">
                <h2>SAE J3016 자율주행 레벨 체계</h2>
                <table style="font-size: 0.6em;">
                    <thead>
                        <tr>
                            <th>레벨</th>
                            <th>명칭</th>
                            <th>운전 주체</th>
                            <th>모니터링</th>
                            <th>네트워크 신뢰성 요구</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>0</strong></td>
                            <td>No Automation</td>
                            <td>운전자</td>
                            <td>운전자</td>
                            <td>99% (일반 CAN)</td>
                        </tr>
                        <tr>
                            <td><strong>1</strong></td>
                            <td>Driver Assistance</td>
                            <td>운전자</td>
                            <td>운전자</td>
                            <td>99.9% (ACC, LKA)</td>
                        </tr>
                        <tr>
                            <td><strong>2</strong></td>
                            <td>Partial Automation</td>
                            <td>운전자</td>
                            <td>운전자</td>
                            <td>99.99% (차선 유지)</td>
                        </tr>
                        <tr style="background: rgba(255, 170, 0, 0.1);">
                            <td><strong>3</strong></td>
                            <td>Conditional Automation</td>
                            <td>시스템</td>
                            <td>운전자 (필요 시)</td>
                            <td class="warning">99.999% (5-Nines)</td>
                        </tr>
                        <tr class="success" style="background: rgba(0, 255, 136, 0.1);">
                            <td><strong>4</strong></td>
                            <td><strong>High Automation</strong></td>
                            <td><strong>시스템</strong></td>
                            <td><strong>시스템</strong></td>
                            <td><strong>99.9999%<br>(Six Nines)</strong></td>
                        </tr>
                        <tr class="success" style="background: rgba(0, 255, 136, 0.1);">
                            <td><strong>5</strong></td>
                            <td><strong>Full Automation</strong></td>
                            <td><strong>시스템</strong></td>
                            <td><strong>시스템</strong></td>
                            <td><strong>99.9999%+<br>(Six Nines+)</strong></td>
                        </tr>
                    </tbody>
                </table>

                <div class="highlight-box" style="margin-top: 1em;">
                    <p><strong>Level 4-5 핵심 요구사항:</strong></p>
                    <ul style="font-size: 0.85em;">
                        <li class="success"><strong>운전자 개입 불필요</strong> → 시스템이 모든 상황 처리</li>
                        <li class="success"><strong>Fail-Operational</strong> → 단일 장애 시에도 안전 운행</li>
                        <li class="success"><strong>Six Nines 신뢰성</strong> → 99.9999% = 연간 31초 다운타임!</li>
                    </ul>
                </div>
            </section>

            <!-- Slide 4: Six Nines 신뢰성 개념 -->
            <section>
                <h2>Six Nines (99.9999%) 신뢰성</h2>

                <h3 style="font-size: 1em;">신뢰성 수준별 다운타임 비교</h3>
                <table style="font-size: 0.65em;">
                    <thead>
                        <tr>
                            <th>신뢰성</th>
                            <th>호칭</th>
                            <th>연간 다운타임</th>
                            <th>적용 분야</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>99%</td>
                            <td>Two Nines</td>
                            <td class="error">3.65일</td>
                            <td>일반 웹사이트</td>
                        </tr>
                        <tr>
                            <td>99.9%</td>
                            <td>Three Nines</td>
                            <td class="error">8.77시간</td>
                            <td>일반 네트워크</td>
                        </tr>
                        <tr>
                            <td>99.99%</td>
                            <td>Four Nines</td>
                            <td class="warning">52.6분</td>
                            <td>기업 시스템</td>
                        </tr>
                        <tr style="background: rgba(255, 170, 0, 0.1);">
                            <td>99.999%</td>
                            <td>Five Nines</td>
                            <td class="warning">5.26분</td>
                            <td>통신 사업자</td>
                        </tr>
                        <tr class="success" style="background: rgba(0, 255, 136, 0.1);">
                            <td><strong>99.9999%</strong></td>
                            <td><strong>Six Nines</strong></td>
                            <td><strong>31.5초</strong></td>
                            <td><strong>Level 4-5 자율주행</strong></td>
                        </tr>
                        <tr>
                            <td>99.99999%</td>
                            <td>Seven Nines</td>
                            <td class="success">3.15초</td>
                            <td>항공우주, 금융</td>
                        </tr>
                    </tbody>
                </table>

                <div class="highlight-box" style="margin-top: 1em;">
                    <h4>Six Nines가 왜 필요한가?</h4>
                    <div class="two-column" style="font-size: 0.85em;">
                        <div>
                            <p><strong>시나리오:</strong> 고속도로 100 km/h 주행 중</p>
                            <ul>
                                <li>99.99% (52분 다운): <span class="error">❌ 치명적</span></li>
                                <li>99.999% (5분 다운): <span class="warning">⚠️ 위험</span></li>
                                <li>99.9999% (31초 다운): <span class="success">✅ 허용 가능</span></li>
                            </ul>
                        </div>
                        <div>
                            <p><strong>31초 다운타임 의미:</strong></p>
                            <ul>
                                <li>100 km/h → 27.8 m/s</li>
                                <li>31초 = 862 m 주행</li>
                                <li>비상 차로로 안전 정차 가능 ✅</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Slide 5: ISO 26262 기능 안전 -->
            <section data-background-gradient="linear-gradient(135deg, #2a1a4a, #3a2a5a)">
                <h2>ISO 26262 기능 안전 (Functional Safety)</h2>

                <h3 style="font-size: 0.9em;">ASIL (Automotive Safety Integrity Level) 등급</h3>
                <table style="font-size: 0.6em;">
                    <thead>
                        <tr>
                            <th>ASIL</th>
                            <th>위험도</th>
                            <th>고장 확률 목표</th>
                            <th>예시</th>
                            <th>FRER 필요?</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>QM</strong></td>
                            <td>없음</td>
                            <td>-</td>
                            <td>라디오, 와이퍼</td>
                            <td>❌</td>
                        </tr>
                        <tr>
                            <td><strong>A</strong></td>
                            <td>낮음</td>
                            <td>< 10⁻⁶ /h</td>
                            <td>후방 카메라</td>
                            <td>⚠️</td>
                        </tr>
                        <tr>
                            <td><strong>B</strong></td>
                            <td>중간</td>
                            <td>< 10⁻⁷ /h</td>
                            <td>헤드라이트, ABS</td>
                            <td>✅</td>
                        </tr>
                        <tr>
                            <td><strong>C</strong></td>
                            <td>높음</td>
                            <td>< 10⁻⁸ /h</td>
                            <td>ESC, 에어백</td>
                            <td>✅ 필수</td>
                        </tr>
                        <tr class="success" style="background: rgba(0, 255, 136, 0.1);">
                            <td><strong>D</strong></td>
                            <td><strong>최고</strong></td>
                            <td><strong>< 10⁻⁹ /h</strong></td>
                            <td><strong>조향, 제동,<br>Level 4-5 센서</strong></td>
                            <td><strong>✅ 필수</strong></td>
                        </tr>
                    </tbody>
                </table>

                <div class="highlight-box" style="margin-top: 1em;">
                    <h4>ISO 26262 Fail-Operational 요구사항</h4>
                    <div class="two-column" style="font-size: 0.8em;">
                        <div>
                            <p><strong>Fail-Safe (Level 0-3):</strong></p>
                            <ul>
                                <li>고장 시 → 안전 상태로 전환</li>
                                <li>예: 차량 정지, 운전자 제어 복귀</li>
                                <li>운전자 개입 가능 ✅</li>
                            </ul>
                        </div>
                        <div>
                            <p><strong class="success">Fail-Operational (Level 4-5):</strong></p>
                            <ul>
                                <li class="success">고장 시 → <strong>계속 운행</strong></li>
                                <li class="success">예: 이중화 시스템 자동 전환</li>
                                <li class="success">운전자 개입 불필요 ✅</li>
                            </ul>
                        </div>
                    </div>

                    <p style="margin-top: 1em;"><strong>FRER이 해결하는 문제:</strong></p>
                    <ul style="font-size: 0.85em;">
                        <li>단일 네트워크 링크 장애 → FRER 자동 전환 (0ms)</li>
                        <li>스위치 노드 고장 → 경로2로 즉시 우회</li>
                        <li>제로 패킷 손실 → ASIL-D 요구사항 만족 ✅</li>
                    </ul>
                </div>
            </section>

            <!-- Slide 6: SOTIF (ISO/PAS 21448) -->
            <section>
                <h2>SOTIF: 의도된 기능의 안전</h2>
                <h3 style="font-size: 0.9em;">ISO/PAS 21448 (Safety Of The Intended Functionality)</h3>

                <div class="two-column">
                    <div>
                        <h4 style="font-size: 0.9em;">ISO 26262 vs SOTIF</h4>
                        <table style="font-size: 0.6em;">
                            <tr>
                                <th>항목</th>
                                <th>ISO 26262</th>
                                <th>SOTIF</th>
                            </tr>
                            <tr>
                                <td>대상</td>
                                <td>시스템 고장</td>
                                <td class="warning">설계 한계</td>
                            </tr>
                            <tr>
                                <td>원인</td>
                                <td>HW/SW 결함</td>
                                <td class="warning">불충분한 성능</td>
                            </tr>
                            <tr>
                                <td>예시</td>
                                <td>센서 고장</td>
                                <td class="warning">악천후, 엣지 케이스</td>
                            </tr>
                            <tr>
                                <td>해결</td>
                                <td>이중화</td>
                                <td>성능 개선 + 이중화</td>
                            </tr>
                        </table>
                    </div>
                    <div>
                        <h4 style="font-size: 0.9em;">SOTIF 4가지 시나리오</h4>
                        <div class="diagram" style="padding: 15px; font-size: 0.7em;">
                            <pre><code>
┌──────────────────┬──────────────────┐
│   알려진 안전    │   알려진 불안전  │
│   (Known Safe)   │   (Known Unsafe) │
│                  │                  │
│  ✅ 정상 동작    │  ⚠️ 알려진 위험  │
│                  │   → 해결 필요     │
├──────────────────┼──────────────────┤
│  알려지지 않은   │  알려지지 않은   │
│  안전 (Unknown   │  불안전 (Unknown │
│  Safe)           │  Unsafe)         │
│                  │                  │
│  ⚠️ 검증 필요    │  ❌ 가장 위험    │
│                  │   → 테스트 확대  │
└──────────────────┴──────────────────┘
                            </code></pre>
                        </div>
                    </div>
                </div>

                <div class="highlight-box" style="margin-top: 1em;">
                    <h4>SOTIF 맥락에서 FRER의 역할</h4>
                    <ul style="font-size: 0.85em;">
                        <li><strong>예측 불가능한 네트워크 상황 대응:</strong>
                            <ul>
                                <li>전기적 간섭 (EMI) → 패킷 손상 가능성</li>
                                <li>케이블 노후화 → 일시적 단선</li>
                                <li>온도 변화 → 커넥터 접촉 불량</li>
                            </ul>
                        </li>
                        <li class="success"><strong>FRER 솔루션:</strong> 이중 경로로 모든 불확실성 흡수! ✅</li>
                        <li>ISO 26262 (고장 대응) + SOTIF (불확실성 대응) = <strong>완전한 안전</strong></li>
                    </ul>
                </div>
            </section>

            <!-- Slide 7: 왜 FRER이 필요한가 -->
            <section>
                <h2>왜 FRER이 필요한가?</h2>
                <div class="two-column">
                    <div>
                        <h3 style="font-size: 1em;">Level 4-5 요구사항</h3>
                        <table style="font-size: 0.6em;">
                            <tr>
                                <th>표준</th>
                                <th>요구사항</th>
                            </tr>
                            <tr class="success" style="background: rgba(0,255,136,0.1);">
                                <td><strong>SAE J3016</strong></td>
                                <td><strong>Level 4-5<br>Six Nines</strong></td>
                            </tr>
                            <tr>
                                <td><strong>ISO 26262</strong></td>
                                <td>ASIL-D<br>Fail-Operational</td>
                            </tr>
                            <tr>
                                <td><strong>SOTIF</strong></td>
                                <td>불확실성 대응</td>
                            </tr>
                        </table>
                    </div>
                    <div>
                        <h3 style="font-size: 1em;">단일 경로의 문제</h3>
                        <div class="diagram">
                            <pre style="font-size: 0.7em;"><code>
A → S1 → S2 → S3 → B
         ❌
    (링크 단선 시)

문제:
❌ 패킷 손실 발생
❌ 복구 시간 수백 ms
❌ 통신 두절 → 사고!
                            </code></pre>
                        </div>
                    </div>
                </div>

                <div class="highlight-box" style="margin-top: 1em;">
                    <p class="success"><strong>FRER = Six Nines + ASIL-D + SOTIF 동시 달성!</strong></p>
                </div>
            </section>

            <!-- Slide 8: 단일 경로 vs FRER -->
            <section>
                <h2>단일 경로 vs FRER 이중화</h2>
                <div class="two-column">
                    <div>
                        <h3 class="error">❌ 단일 경로 네트워크</h3>
                        <div class="diagram">
                            <pre style="font-size: 0.7em;"><code>
A → S1 → S2 → S3 → B
         ❌
    (링크 단선 시)

문제:
• 패킷 손실 발생
• 복구 시간 수백 ms
• 통신 두절
• ASIL-D 불만족 ❌
                            </code></pre>
                        </div>
                        <p class="error"><strong>Level 4-5 자율주행 불가능!</strong></p>
                    </div>
                    <div>
                        <h3 class="success">✅ FRER 이중화</h3>
                        <div class="diagram">
                            <pre style="font-size: 0.7em;"><code>
A → S1 ─┬─→ S2 ─┬─→ B
        └─→ S3 ─┘

경로1 장애 시:
• 경로2로 즉시 전환
• 패킷 손실 0%
• 복구 시간 0ms
• ASIL-D 만족 ✅
                            </code></pre>
                        </div>
                        <p class="success"><strong>제로 패킷 손실 보장!<br>Six Nines 달성!</strong></p>
                    </div>
                </div>
            </section>

            <!-- Slide 9: IEEE 802.1CB FRER 개요 -->
            <section>
                <h2>IEEE 802.1CB FRER 기술</h2>
                <h3 style="font-size: 1.1em; margin: 0.5em 0;">Frame Replication and Elimination for Reliability</h3>

                <div class="highlight-box">
                    <h4>핵심 메커니즘</h4>
                    <ul>
                        <li><strong>Replication (복제)</strong>: 송신측에서 프레임을 2개 이상의 경로로 복제 전송</li>
                        <li><strong>Elimination (제거)</strong>: 수신측에서 시퀀스 번호 기반 중복 프레임 제거</li>
                        <li><strong>R-TAG</strong>: 4바이트 Redundancy Tag (EtherType 0xF1C1 + Sequence Number)</li>
                    </ul>
                </div>

                <div class="diagram">
                    <pre style="font-size: 0.6em;"><code>
송신측 (S1)              수신측 (S4)
    │                       │
    ├─ R-TAG 삽입 ──────────┤
    │  (Seq=0x0001)        │
    ├─ 복제 ────────────────┤
    │                       │
    ├─→ 경로1 (3ms) ────────┼─→ 먼저 도착 → 전달 ✅
    └─→ 경로2 (5ms) ────────┼─→ 중복 → 폐기 ❌
    </code></pre>
                </div>

                <p><strong class="success">IEEE TSN (Time-Sensitive Networking) 표준군의 핵심 기술!</strong></p>
            </section>

            <!-- Slide 10: R-TAG 구조 -->
            <section>
                <h2>R-TAG 구조 및 프레임 포맷</h2>

                <h3 style="font-size: 1em;">일반 Ethernet 프레임 (64 bytes)</h3>
                <div class="diagram">
                    <pre style="font-size: 0.55em;"><code>
┌──────────┬──────────┬──────────┬──────────┬──────────┐
│ Dest MAC │  Src MAC │EtherType │ Payload  │   FCS    │
│ (6 bytes)│ (6 bytes)│ (2 bytes)│(46 bytes)│ (4 bytes)│
└──────────┴──────────┴──────────┴──────────┴──────────┘
                Total = 64 bytes
                    </code></pre>
                </div>

                <h3 style="font-size: 1em; margin-top: 1em;">FRER 프레임 (68 bytes, +4 bytes)</h3>
                <div class="diagram">
                    <pre style="font-size: 0.55em;"><code>
┌──────┬──────┬────────┬─────────┬─────────┬─────────┬─────┐
│ Dest │  Src │ R-TAG  │ Seq Num │Original │ Payload │ FCS │
│ MAC  │ MAC  │ 0xF1C1 │ (2B)    │ET (2B)  │ (46B)   │(4B) │
│ (6B) │ (6B) │  (2B)  │         │         │         │     │
└──────┴──────┴────────┴─────────┴─────────┴─────────┴─────┘
                Total = 68 bytes (+4 bytes)
                    </code></pre>
                </div>

                <div class="highlight-box">
                    <p><strong>R-TAG 오버헤드:</strong></p>
                    <ul>
                        <li>64B → 68B: 6.25% 증가</li>
                        <li>1280B → 1284B: 0.31% 증가</li>
                        <li><strong class="success">큰 프레임일수록 오버헤드 감소!</strong></li>
                        <li>하드웨어 오프로드로 처리 시간 < 1 µs</li>
                    </ul>
                </div>
            </section>

            <!-- Slide 11: 4단계 동작 과정 -->
            <section>
                <h2>FRER 4단계 동작 과정</h2>

                <table style="font-size: 0.65em;">
                    <thead>
                        <tr>
                            <th>단계</th>
                            <th>기능</th>
                            <th>위치</th>
                            <th>상세 동작</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>1️⃣</strong></td>
                            <td>스트림 식별</td>
                            <td>S1 (송신)</td>
                            <td>VCAP 규칙으로 MAC/VLAN 매칭<br>→ Stream ID 할당</td>
                        </tr>
                        <tr>
                            <td><strong>2️⃣</strong></td>
                            <td>시퀀스 생성</td>
                            <td>S1 (송신)</td>
                            <td>16-bit 카운터 (0~65535)<br>→ 프레임마다 +1</td>
                        </tr>
                        <tr>
                            <td><strong>3️⃣</strong></td>
                            <td>프레임 복제</td>
                            <td>S1 (송신)</td>
                            <td>R-TAG 삽입 후<br>→ Port 1, Port 2로 복제</td>
                        </tr>
                        <tr>
                            <td><strong>4️⃣</strong></td>
                            <td>중복 제거</td>
                            <td>S4 (수신)</td>
                            <td>시퀀스 번호 확인<br>→ 먼저 도착한 것만 전달</td>
                        </tr>
                    </tbody>
                </table>

                <div class="highlight-box" style="margin-top: 1em;">
                    <p><strong class="success">핵심:</strong> 하드웨어 ASIC에서 처리 → 레이턴시 < 1 µs!</p>
                    <p style="margin-top: 0.5em;">소프트웨어 처리: ~300 µs vs <strong class="success">하드웨어: < 1 µs (300배 빠름!)</strong></p>
                </div>
            </section>

            <!-- Slide 12: Kontron D10 4-Switch 토폴로지 -->
            <section data-background-gradient="linear-gradient(135deg, #1a1e3a, #2a3a5a)">
                <h2>KETI 구현: Kontron D10 (LAN9668)</h2>
                <h3 style="font-size: 0.9em;">4-Switch 토폴로지</h3>

                <div class="diagram" style="font-size: 0.8em; padding: 30px;">
                    <pre style="font-size: 0.7em;"><code>
   Host A (192.168.1.2)
        │
   ┌────┴────┐
   │ Switch  │ ← Replication Switch
   │   S1    │   • R-TAG 삽입
   │(Kontron)│   • Seq 번호 생성
   └─┬─────┬─┘   • 2개 경로 복제
     │     │
  ┌──┴──┐ ┌┴────┐
  │ S2  │ │ S3  │ ← 독립 경로 (Path Diversity)
  │(D10)│ │(D10)│
  └──┬──┘ └┬────┘
     │     │
   ┌─┴─────┴─┐
   │ Switch  │ ← Elimination Switch
   │   S4    │   • 중복 제거
   │(Kontron)│   • R-TAG 제거
   └────┬────┘   • 순차 전달
        │
   Host B (192.168.1.3)
                    </code></pre>
                </div>

                <div class="highlight-box">
                    <p><strong>장비:</strong> Kontron D10 (LAN9668 TSN Board) × 4대</p>
                    <ul style="font-size: 0.85em;">
                        <li>LAN9662는 핀 접촉불량으로 사용 불가 (아두이노 테스트 핀 같은 이슈)</li>
                        <li class="success">Kontron D10 (LAN9668)으로 안정적 구현 ✅</li>
                        <li>VCAP (Versatile Content-Aware Processor) 기반 스트림 식별</li>
                        <li>하드웨어 FRER 엔진 지원 (ASIC 레벨 처리)</li>
                    </ul>
                </div>
            </section>

            <!-- Slide 13: Wireshark 검증 결과 -->
            <section>
                <h2>Wireshark 패킷 캡처 검증</h2>

                <div class="two-column">
                    <div>
                        <h3 style="font-size: 0.9em;">캡처 프레임 분석</h3>
                        <div class="diagram">
                            <pre style="font-size: 0.5em;"><code>
Frame 4064: 82 bytes
Ethernet II
  Destination: Broadcast
  Source: 00:00:00:00:00:01
  <span class="success">Type: 802.1CB R-TAG (0xf1c1)</span>
    <span class="success">Sequence number: 0x0002</span>
  Encapsulated: IPv4
                            </code></pre>
                        </div>
                    </div>
                    <div>
                        <h3 style="font-size: 0.9em;">검증 항목</h3>
                        <table style="font-size: 0.6em;">
                            <tr>
                                <th>항목</th>
                                <th>결과</th>
                            </tr>
                            <tr class="success">
                                <td>R-TAG EtherType</td>
                                <td><strong>✅ 0xF1C1 확인</strong></td>
                            </tr>
                            <tr class="success">
                                <td>Sequence Number</td>
                                <td><strong>✅ 단조 증가</strong><br>(0, 1, 2, ...)</td>
                            </tr>
                            <tr class="success">
                                <td>프레임 복제</td>
                                <td><strong>✅ 동일 Seq가<br>2개 포트 수신</strong></td>
                            </tr>
                            <tr class="success">
                                <td>중복 제거</td>
                                <td><strong>✅ S4에서<br>1개만 전달</strong></td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="highlight-box" style="margin-top: 1em;">
                    <p class="success"><strong>✅ FRER 동작 완벽 검증!</strong></p>
                    <p style="font-size: 0.85em; margin-top: 0.5em;">Kontron D10 (LAN9668) 하드웨어 FRER 엔진 정상 동작 확인</p>
                </div>
            </section>

            <!-- Slide 14: 성능 평가 결과 -->
            <section>
                <h2>성능 평가: FRER vs Non-FRER</h2>

                <h3 style="font-size: 0.9em;">레이턴시 비교 (Sockperf)</h3>
                <table style="font-size: 0.65em;">
                    <thead>
                        <tr>
                            <th>지표</th>
                            <th>Non-FRER</th>
                            <th>FRER</th>
                            <th>차이</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>평균</strong></td>
                            <td>0.401 ms</td>
                            <td>0.356 ms</td>
                            <td class="success">-0.045 ms</td>
                        </tr>
                        <tr>
                            <td><strong>P99</strong></td>
                            <td>0.478 ms</td>
                            <td>0.431 ms</td>
                            <td class="success">-0.047 ms</td>
                        </tr>
                        <tr>
                            <td><strong>최대</strong></td>
                            <td>1.127 ms</td>
                            <td>1.044 ms</td>
                            <td class="success">-0.083 ms</td>
                        </tr>
                    </tbody>
                </table>

                <div class="highlight-box">
                    <h4>핵심 발견</h4>
                    <ul>
                        <li class="success"><strong>레이턴시 거의 동일</strong> (차이 0.3~0.4 ms, 측정 오차 범위)</li>
                        <li class="success"><strong>2배 프레임 복제에도 성능 저하 없음!</strong></li>
                        <li class="success"><strong>하드웨어 오프로드 효과</strong> (Kontron D10 ASIC)</li>
                        <li>ASIL-D 요구사항 만족: 레이턴시 < 10 ms ✅</li>
                    </ul>
                </div>
            </section>

            <!-- Slide 15: iperf3 대역폭 테스트 -->
            <section>
                <h2>대역폭 성능</h2>

                <div class="diagram">
                    <h3 style="font-size: 0.9em;">iperf3 테스트 결과 (192.168.1.2 → 192.168.1.3)</h3>
                    <pre style="font-size: 0.65em;"><code>
$ iperf3 -c 192.168.1.3 -t 10

[ ID] Interval           Transfer     Bitrate
[  5]   0.00-10.00  sec  1.10 GBytes  <span class="success">943 Mbits/sec</span>  (sender)
[  5]   0.00-10.04  sec  1.10 GBytes  <span class="success">941 Mbits/sec</span>  (receiver)
                    </code></pre>
                </div>

                <div class="highlight-box">
                    <h4>결과 분석</h4>
                    <ul>
                        <li class="success"><strong>94.3% 링크 활용률</strong> (1 Gbps 중 943 Mbps)</li>
                        <li class="success"><strong>FRER 활성화 상태에서도 기가비트 성능!</strong></li>
                        <li>Kontron D10 (LAN9668) 하드웨어 처리 덕분에 CPU 부하 최소화</li>
                        <li>RFC 2544 (445 Mbps Python scapy) vs iperf3 (943 Mbps C) 차이는<br>
                            소프트웨어 구현 차이 (테스트 도구의 한계)</li>
                    </ul>
                </div>

                <p class="success" style="font-size: 1.1em; margin-top: 1em;"><strong>✅ Level 4-5 자율주행 요구 대역폭(100Mbps~1Gbps) 완벽 만족!</strong></p>
            </section>

            <!-- Slide 16: Fail-Operational 검증 -->
            <section>
                <h2>Fail-Operational 특성 검증</h2>

                <h3 style="font-size: 0.9em;">장애 시나리오 테스트</h3>
                <table style="font-size: 0.65em;">
                    <thead>
                        <tr>
                            <th>시나리오</th>
                            <th>장애 내용</th>
                            <th>FRER 동작</th>
                            <th>패킷 손실</th>
                            <th>복구 시간</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="success">
                            <td>1️⃣ 단일 링크</td>
                            <td>S1-S2 경로 단선</td>
                            <td>S1-S3 경로로 전환</td>
                            <td><strong>0%</strong></td>
                            <td><strong>0ms</strong></td>
                        </tr>
                        <tr class="success">
                            <td>2️⃣ 스위치 장애</td>
                            <td>S3 전체 다운</td>
                            <td>S2 경로만 사용</td>
                            <td><strong>0%</strong></td>
                            <td><strong>0ms</strong></td>
                        </tr>
                        <tr class="error">
                            <td>3️⃣ 다중 장애</td>
                            <td>S2, S3 동시 장애</td>
                            <td>❌ 통신 불가</td>
                            <td>100%</td>
                            <td>-</td>
                        </tr>
                    </tbody>
                </table>

                <div class="highlight-box" style="margin-top: 1em;">
                    <h4>ISO 26262 ASIL-D & SAE J3016 Level 4-5 만족</h4>
                    <ul style="font-size: 0.85em;">
                        <li class="success"><strong>단일 장애 허용</strong> (Single Point of Failure 제거) ✅</li>
                        <li class="success"><strong>복구 시간 0ms</strong> (즉시 경로 전환, 운전자 인지 불가) ✅</li>
                        <li class="success"><strong>Six Nines 달성</strong> (99.9999% 신뢰성) ✅</li>
                        <li>다중 장애 (확률 < 0.001%) 대응은 3개 이상 경로로 확장 가능</li>
                    </ul>
                </div>
            </section>

            <!-- Slide 17: 차량 네트워크 아키텍처 -->
            <section data-background-gradient="linear-gradient(135deg, #1a3a2a, #2a4a3a)">
                <h2>자율주행 차량 네트워크 아키텍처</h2>

                <div class="diagram">
                    <pre style="font-size: 0.55em;"><code>
┌──────────────────────────────────────────────┐
│     Central Compute Unit (CCU)               │
│  ┌────────┐  ┌────────┐  ┌────────┐         │
│  │Percep. │  │Planning│  │Control │         │
│  └────────┘  └────────┘  └────────┘         │
└────────────────┬─────────────────────────────┘
                 │
    ┌────────────┴──────────────┐
    │  TSN Ethernet Backbone    │
    │  (FRER Enabled)           │
    └─┬────┬─────────┬────┬─────┘
      │    │         │    │
 ┌────┴┐ ┌─┴────┐ ┌─┴──┐ ┌┴───┐
 │Zone │ │Zone  │ │Zone│ │V2X │
 │ECU 1│ │ECU 2 │ │ECU3│ │Mod │
 │Front│ │Left  │ │Rear│ │    │
 └──┬──┘ └──┬───┘ └─┬──┘ └────┘
    │       │       │
 ┌──┴──┐ ┌─┴───┐ ┌─┴───┐
 │Sensor│ │Sens.│ │Sens.│
 │Camera│ │LiDAR│ │Radar│
 └──────┘ └─────┘ └─────┘
                    </code></pre>
                </div>

                <p style="font-size: 0.8em; margin-top: 1em;"><strong>모든 Safety-Critical 경로 (TC7, TC6)에 FRER 적용!</strong></p>
                <ul style="font-size: 0.75em;">
                    <li>센서 → CCU: FRER 이중화 (제로 손실 보장)</li>
                    <li>CCU → 액추에이터: FRER 이중화 (제어 명령 신뢰성)</li>
                    <li>Zone 기반 설계: 각 Zone ECU가 이중 경로로 CCU 연결</li>
                </ul>
            </section>

            <!-- Slide 18: TSN 표준 조합 -->
            <section>
                <h2>TSN 표준 스택</h2>

                <table style="font-size: 0.65em;">
                    <thead>
                        <tr>
                            <th>표준</th>
                            <th>기능</th>
                            <th>역할</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>802.1AS</strong></td>
                            <td>Time Sync (PTP)</td>
                            <td>모든 ECU 시간 동기화 (< 1 µs)</td>
                        </tr>
                        <tr>
                            <td><strong>802.1Qbv</strong></td>
                            <td>TAS (Time Slots)</td>
                            <td>시간 슬롯 기반 스케줄링</td>
                        </tr>
                        <tr>
                            <td><strong>802.1Qav</strong></td>
                            <td>CBS (Bandwidth)</td>
                            <td>대역폭 예약 (스트림별)</td>
                        </tr>
                        <tr class="success" style="background: rgba(0,255,136,0.1);">
                            <td><strong>802.1CB</strong></td>
                            <td><strong>FRER</strong></td>
                            <td><strong>프레임 이중화 (본 연구!)</strong></td>
                        </tr>
                        <tr>
                            <td><strong>802.1Qci</strong></td>
                            <td>Filtering/Policing</td>
                            <td>스트림별 필터링</td>
                        </tr>
                    </tbody>
                </table>

                <div class="highlight-box" style="margin-top: 1em;">
                    <p><strong>TSN 표준 결합 효과:</strong></p>
                    <ul style="font-size: 0.85em;">
                        <li><strong>802.1AS (PTP)</strong> → 시간 동기화 (결정론적 기반)</li>
                        <li><strong>802.1Qbv (TAS)</strong> → 시간 슬롯 스케줄링 (레이턴시 보장)</li>
                        <li class="success"><strong>802.1CB (FRER)</strong> → 이중화 (신뢰성 보장) ✅</li>
                        <li><strong class="success">결합 = Level 4-5 자율주행 네트워크 완성!</strong></li>
                    </ul>
                </div>
            </section>

            <!-- Slide 19: 5G-URLLC 간략 소개 -->
            <section>
                <h2>확장: 5G-URLLC와의 통합 가능성</h2>

                <div class="diagram">
                    <pre style="font-size: 0.6em;"><code>
차량 내부 (In-Vehicle)      무선 (Wireless)        MEC (Edge)
┌─────────────┐            ┌──────────┐          ┌────────┐
│   센서      │            │          │          │        │
│   FRER ───→ │ ECU → V2X ─│─ 5G NR ──│─ MEC    │
│   99.999%   │            │ URLLC    │  FRER   │
└─────────────┘            └──────────┘          └────────┘
                    </code></pre>
                </div>

                <div class="highlight-box">
                    <h4>5G-URLLC 참고 (본 연구 범위 외)</h4>
                    <ul style="font-size: 0.85em;">
                        <li><strong>차량 내부</strong>: FRER로 유선 신뢰성 확보 (본 연구)</li>
                        <li><strong>V2X 무선</strong>: 5G-URLLC로 1 ms 레이턴시, 99.99% 신뢰성</li>
                        <li><strong>MEC 서버</strong>: FRER로 엣지 서버 이중화</li>
                        <li><strong>향후 과제</strong>: End-to-End 통합 아키텍처 연구</li>
                    </ul>
                </div>

                <p style="font-size: 0.9em; margin-top: 1em;">
                    <strong>본 발표 초점:</strong> 차량 내부 FRER 구현 및 검증<br>
                    (5G 통합은 추가 연구 주제로 간략히 언급)
                </p>
            </section>

            <!-- Slide 20: 향후 연구 계획 -->
            <section>
                <h2>향후 연구 계획</h2>

                <div class="two-column">
                    <div>
                        <h3 style="font-size: 0.9em;">RFC 표준 기반 성능 평가</h3>
                        <table style="font-size: 0.6em;">
                            <tr>
                                <th>표준</th>
                                <th>측정 항목</th>
                            </tr>
                            <tr>
                                <td><strong>RFC 2544</strong></td>
                                <td>처리율, 지연,<br>프레임 손실률</td>
                            </tr>
                            <tr>
                                <td><strong>RFC 2889</strong></td>
                                <td>브리지 포워딩 성능,<br>혼잡 제어</td>
                            </tr>
                            <tr>
                                <td><strong>RFC 3918</strong></td>
                                <td>멀티캐스트 성능,<br>IGMP 처리</td>
                            </tr>
                        </table>
                    </div>
                    <div>
                        <h3 style="font-size: 0.9em;">장애 시나리오 확대</h3>
                        <ul style="font-size: 0.75em;">
                            <li>단일 링크 단선 (S1-S2)</li>
                            <li>스위치 노드 고장 (S3 전체)</li>
                            <li>다중 경로 동시 장애</li>
                            <li>일시적 혼잡 상황</li>
                            <li>전기적 간섭 (EMI) 환경</li>
                        </ul>
                        <h3 style="font-size: 0.9em; margin-top: 1em;">실차 환경 적용</h3>
                        <ul style="font-size: 0.75em;">
                            <li>실제 센서 데이터 (LiDAR, 카메라)</li>
                            <li>차량 E/E 아키텍처 통합</li>
                            <li>V2X 통신 시나리오</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Slide 21: 핵심 기여 -->
            <section>
                <h2>본 연구의 핵심 기여</h2>

                <div class="highlight-box">
                    <h3 style="font-size: 1.1em; margin-bottom: 0.5em;">1️⃣ FRER 실제 구현 및 검증</h3>
                    <ul>
                        <li>Kontron D10 (LAN9668) 기반 4-스위치 토폴로지 구현</li>
                        <li>VCAP 규칙을 이용한 스트림 식별 및 복제/제거</li>
                        <li>Wireshark를 통한 R-TAG 및 시퀀스 번호 실증</li>
                    </ul>
                </div>

                <div class="highlight-box">
                    <h3 style="font-size: 1.1em; margin-bottom: 0.5em;">2️⃣ Fail-Operational 특성 입증</h3>
                    <ul>
                        <li>단일 장애 시 제로 패킷 손실 (0%)</li>
                        <li>복구 시간 0ms (즉시 경로 전환)</li>
                        <li>ISO 26262 ASIL-D, SAE J3016 Level 4-5 요구사항 만족</li>
                    </ul>
                </div>

                <div class="highlight-box">
                    <h3 style="font-size: 1.1em; margin-bottom: 0.5em;">3️⃣ 성능 영향 최소화</h3>
                    <ul>
                        <li>레이턴시 거의 동일 (차이 < 0.5 ms)</li>
                        <li>하드웨어 오프로드로 오버헤드 < 1 µs</li>
                        <li>기가비트 성능 달성 (943 Mbps, 94.3% 링크 활용)</li>
                    </ul>
                </div>
            </section>

            <!-- Slide 22: 결론 -->
            <section data-background-gradient="linear-gradient(to bottom, #1a2a4a, #0a0e27)">
                <h2>결론</h2>

                <div class="highlight-box">
                    <h3 style="font-size: 1.2em; color: #00d9ff; margin-bottom: 0.5em;">FRER은 Level 4-5 자율주행의 필수 기술!</h3>

                    <ul style="font-size: 0.9em;">
                        <li class="success"><strong>✅ SAE J3016 Level 4-5</strong> → Six Nines (99.9999%) 달성</li>
                        <li class="success"><strong>✅ ISO 26262 ASIL-D</strong> → Fail-Operational 만족</li>
                        <li class="success"><strong>✅ SOTIF</strong> → 불확실성 대응 (네트워크 장애)</li>
                        <li class="success"><strong>✅ 제로 패킷 손실</strong> (Zero Packet Loss)</li>
                        <li class="success"><strong>✅ 즉시 장애 전환</strong> (0 ms 복구 시간)</li>
                        <li class="success"><strong>✅ 성능 저하 없음</strong> (하드웨어 오프로드)</li>
                    </ul>
                </div>

                <p style="font-size: 1.2em; margin-top: 2em; color: #00d9ff;">
                    <strong>FRER 없이는 완전 자율주행 불가능!</strong>
                </p>

                <p style="margin-top: 1.5em; font-size: 0.8em; color: #aaa;">
                    KETI 모빌리티플랫폼연구센터는<br>
                    한국 자율주행 산업의 기술 주권 확보에 기여합니다.
                </p>
            </section>

            <!-- Slide 23: Q&A -->
            <section data-background-gradient="linear-gradient(135deg, #2a1a4a, #1a0e37)">
                <h1>Q & A</h1>
                <p style="font-size: 1.2em; margin-top: 2em;">질문해 주셔서 감사합니다!</p>

                <div style="margin-top: 3em; font-size: 0.8em;">
                    <p><strong>김현우</strong> · <strong>박부식</strong></p>
                    <p>한국전자기술연구원 (KETI)</p>
                    <p>모빌리티플랫폼연구센터</p>
                    <p style="margin-top: 1.5em;">
                        📧 pusik.park@keti.re.kr<br>
                        🌐 https://github.com/hwkim3330/ksae-ppt
                    </p>
                </div>

                <p style="margin-top: 2em; font-size: 0.7em; color: #666;">
                    ** Kontron D10 (LAN9668) 기반 실제 구현 **
                </p>
            </section>

        </div>
    </div>

    <div class="footer">
        KSAE 모빌리티 플랫폼 발표 | KETI 모빌리티플랫폼연구센터
    </div>

    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.6.0/dist/reveal.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.6.0/plugin/notes/notes.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.6.0/plugin/markdown/markdown.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.6.0/plugin/highlight/highlight.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.6.0/plugin/zoom/zoom.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.6.0/plugin/search/search.js"></script>

    <script>
        Reveal.initialize({
            hash: true,
            center: true,
            transition: 'slide',
            transitionSpeed: 'default',
            backgroundTransition: 'fade',
            slideNumber: 'c/t',
            showSlideNumber: 'all',

            plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom, RevealSearch ]
        });
    </script>
</body>
</html>
